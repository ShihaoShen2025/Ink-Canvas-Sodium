<Window x:Class="Ink_Canvas.FloatingToolBarV2"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Ink_Canvas"
        xmlns:popups="clr-namespace:Ink_Canvas.Popups"
        Topmost="True" Loaded="FloatingBarV2_Loaded"
        mc:Ignorable="d" WindowStyle="None" Background="Transparent" AllowsTransparency="True" ResizeMode="NoResize"
        Title="FloatingToolBarV2">
    <Window.Resources>
        <DrawingImage x:Key="CursorIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                    <GeometryDrawing Brush="#FF222222" Geometry="F1 M24,24z M0,0z M5.19409,16.3124C5.46422,18.0658 5.69121,19.539 5.8351,20.4621 5.9631,21.2477 6.80568,21.3359 7.22902,20.5643 7.93608,19.3044 9.20443,17.1009 10.0921,15.5636L14.9921,22.5615C15.1915,22.8462,15.5839,22.9154,15.8687,22.716L17.9309,21.272C18.2157,21.0727,18.2848,20.6802,18.0854,20.3955L13.5037,13.8522C15.6284,13.8519 18.6266,13.8518 20.2609,13.8524 21.1847,13.8201 21.258,12.9461 20.5777,12.4184 16.9666,9.91811 8.45126,4.12632 4.34164,1.42431 3.63839,0.928666 2.78717,1.12985 3.00557,2.27077 3.59731,5.94841 4.52718,11.9839 5.19409,16.3124z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="PenIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                    <GeometryDrawing Brush="#222222" Geometry="F1 M24,24z M0,0z M20.4786,1.42438C19.9985,1.23743 19.4847,1.15194 18.9698,1.17319 18.4549,1.19444 17.9499,1.32197 17.4869,1.54789 17.0368,1.76752 16.6358,2.07554 16.3083,2.45361L3.85516,14.9067 9.08243,20.134 21.5311,7.68529C21.9113,7.36382 22.223,6.96912 22.447,6.52438 22.6786,6.06462 22.8113,5.56167 22.8365,5.04763 22.8616,4.5336 22.7787,4.02012 22.593,3.54002 22.4073,3.05994 22.1232,2.62403 21.759,2.25988 21.3949,1.89574 20.9587,1.61132 20.4786,1.42438z" />
                    <GeometryDrawing Brush="#222222" Geometry="F1 M24,24z M0,0z M7.28056,21.1605L2.8286,16.7086 1.15912,22.83 7.28056,21.1605z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="EraserIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                    <GeometryDrawing Brush="#222222" Geometry="F1 M24,24z M0,0z M15.6314,20.7262L22.7921,13.5655C24.3494,12.141,24.2819,9.81776,22.8105,8.34633L16.7793,2.31508C15.3547,0.757753,13.0315,0.825236,11.5601,2.29666L4.38099,9.47574 15.6314,20.7262z" />
                    <GeometryDrawing Brush="#222222" Geometry="F1 M24,24z M0,0z M14.2172,22.1404L2.96677,10.89 1.20761,12.6491C-0.34971,14.0737,-0.281711,16.3974,1.18971,17.8688L6.15089,22.83 13.5276,22.83 14.2172,22.1404z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="TrashBinIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                    <GeometryDrawing Brush="#e01b24" Geometry="F0 M24,24z M0,0z M8.82358,1.16992C8.5646,1.16992,8.33468,1.33565,8.25279,1.58133L7.5877,3.57659 1.77159,3.57659C1.4393,3.57659,1.16992,3.84597,1.16992,4.17826L1.16992,5.38159C1.16992,5.71388,1.4393,5.98326,1.77159,5.98326L22.2283,5.98326C22.5605,5.98326,22.8299,5.71388,22.8299,5.38159L22.8299,4.17826C22.8299,3.84597,22.5605,3.57659,22.2283,3.57659L16.4122,3.57659 15.7471,1.58133C15.6652,1.33565,15.4352,1.16992,15.1762,1.16992L8.82358,1.16992z M3.57659,7.78826L20.4233,7.78826 19.3085,21.7225C19.2584,22.3479,18.7364,22.8299,18.109,22.8299L5.89083,22.8299C5.26346,22.8299,4.74137,22.3479,4.69133,21.7225L3.57659,7.78826z M8.99159,11.9999C8.6593,11.9999,8.38992,12.2693,8.38992,12.6016L8.38992,17.4149C8.38992,17.7472,8.6593,18.0166,8.99159,18.0166L9.59326,18.0166C9.9255,18.0166,10.1949,17.7472,10.1949,17.4149L10.1949,12.6016C10.1949,12.2693,9.9255,11.9999,9.59326,11.9999L8.99159,11.9999z M13.8049,12.6016C13.8049,12.2693,14.0743,11.9999,14.4066,11.9999L15.0083,11.9999C15.3405,11.9999,15.6099,12.2693,15.6099,12.6016L15.6099,17.4149C15.6099,17.7472,15.3405,18.0166,15.0083,18.0166L14.4066,18.0166C14.0743,18.0166,13.8049,17.7472,13.8049,17.4149L13.8049,12.6016z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="ShapesIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                    <GeometryDrawing Brush="#FF222222" Geometry="F1 M24,24z M0,0z M17.8613,10.7596L12.0077,1.16992 6.14056,10.7596 17.8613,10.7596z" />
                    <GeometryDrawing Brush="#FF222222" Geometry="F1 M24,24z M0,0z M10.9354,13.2402L1.3457,13.2402 1.3457,22.8299 10.9354,22.8299 10.9354,13.2402z" />
                    <GeometryDrawing Brush="#FF222222" Geometry="F1 M24,24z M0,0z M17.8613,13.2402C15.2132,13.2402 13.0665,15.3869 13.0665,18.0351 13.0665,20.6832 15.2132,22.8299 17.8613,22.8299 20.5094,22.8299 22.6562,20.6832 22.6562,18.0351 22.6562,15.3869 20.5094,13.2402 17.8613,13.2402z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="SelectIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                    <GeometryDrawing Brush="#222222" Geometry="F1 M24,24z M0,0z M2.12162,2.12162C2.73093,1.51232,3.55732,1.17001,4.41901,1.17001L5.50201,1.17001 5.50201,3.33601 4.41901,3.33601C4.13178,3.33601 3.85632,3.45011 3.65321,3.65321 3.45011,3.85632 3.33601,4.13178 3.33601,4.41901L3.33601,5.50201 1.17001,5.50201 1.17001,4.41901C1.17001,3.55732,1.51232,2.73093,2.12162,2.12162z" />
                    <GeometryDrawing Brush="#222222" Geometry="F1 M24,24z M0,0z M18.498,1.17001L19.581,1.17001C20.4427,1.17001 21.2691,1.51232 21.8784,2.12162 22.4877,2.73093 22.83,3.55732 22.83,4.41901L22.83,5.50201 20.664,5.50201 20.664,4.41901C20.664,4.13178 20.5499,3.85632 20.3468,3.65321 20.1437,3.45011 19.8682,3.33601 19.581,3.33601L18.498,3.33601 18.498,1.17001z" />
                    <GeometryDrawing Brush="#222222" Geometry="F1 M24,24z M0,0z M3.33601,19.581L3.33601,18.498 1.17001,18.498 1.17001,19.581C1.17001,20.4427 1.51232,21.2691 2.12162,21.8784 2.73093,22.4877 3.55732,22.83 4.41901,22.83L5.50201,22.83 5.50201,20.664 4.41901,20.664C4.13178,20.664 3.85632,20.5499 3.65321,20.3468 3.45011,20.1437 3.33601,19.8682 3.33601,19.581z" />
                    <GeometryDrawing Brush="#222222" Geometry="F1 M24,24z M0,0z M7.66801,1.17001L10.917,1.17001 10.917,3.33601 7.66801,3.33601 7.66801,1.17001z" />
                    <GeometryDrawing Brush="#222222" Geometry="F1 M24,24z M0,0z M12,20.664L7.66801,20.664 7.66801,22.83 12,22.83 12,20.664z" />
                    <GeometryDrawing Brush="#222222" Geometry="F1 M24,24z M0,0z M13.083,1.17001L16.332,1.17001 16.332,3.33601 13.083,3.33601 13.083,1.17001z" />
                    <GeometryDrawing Brush="#222222" Geometry="F1 M24,24z M0,0z M3.33601,10.917L3.33601,7.66801 1.17001,7.66801 1.17001,10.917 3.33601,10.917z" />
                    <GeometryDrawing Brush="#222222" Geometry="F1 M24,24z M0,0z M22.83,7.66801L22.83,12 20.664,12 20.664,7.66801 22.83,7.66801z" />
                    <GeometryDrawing Brush="#222222" Geometry="F1 M24,24z M0,0z M3.33601,16.332L3.33601,13.083 1.17001,13.083 1.17001,16.332 3.33601,16.332z" />
                    <GeometryDrawing Brush="#222222" Geometry="F1 M24,24z M0,0z M10.7469,10.747L22.83,15.781 18.4517,17.2681 22.2785,21.0949 21.0949,22.2785 17.2681,18.4517 15.781,22.83 10.7469,10.747z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="UndoIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                    <GeometryDrawing Brush="#222222" Geometry="F1 M24,24z M0,0z M8.71408,16.8493L0.874451,9.00964 8.71408,1.17001 8.71408,7.42358 15.7239,7.42358C16.7074,7.42358 17.6791,7.62744 18.583,8.02124 19.4866,8.41493 20.3023,8.98966 20.9857,9.70849 21.6689,10.4271 22.2069,11.276 22.5726,12.2047 22.9383,13.1333 23.1256,14.126 23.1256,15.1268 23.1256,16.1276 22.9383,17.1203 22.5726,18.0489 22.2069,18.9776 21.6689,19.8264 20.9857,20.5451 20.3023,21.2639 19.4866,21.8387 18.583,22.2324 17.6791,22.6262 16.7074,22.83 15.7239,22.83L10.437,22.83 10.437,19.6579 15.7239,19.6579C16.2679,19.6579 16.8086,19.5453 17.3159,19.3243 17.8235,19.1031 18.29,18.7767 18.6867,18.3594 19.0835,17.942 19.4023,17.4422 19.6211,16.8866 19.8399,16.3308 19.9534,15.7326 19.9534,15.1268 19.9534,14.5209 19.8399,13.9227 19.6211,13.367 19.4023,12.8114 19.0835,12.3115 18.6867,11.8941 18.29,11.4769 17.8235,11.1505 17.3159,10.9293 16.8086,10.7083 16.2679,10.5957 15.7239,10.5957L8.71408,10.5957 8.71408,16.8493z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="RedoIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                    <GeometryDrawing Brush="#222222" Geometry="F1 M24,24z M0,0z M15.2859,16.8493L23.1255,9.00964 15.2859,1.17001 15.2859,7.42358 8.27607,7.42358C7.29262,7.42358 6.32086,7.62744 5.41703,8.02124 4.51341,8.41493 3.69773,8.98966 3.01434,9.70849 2.33111,10.4271 1.79312,11.276 1.42741,12.2047 1.06174,13.1333 0.874422,14.126 0.874422,15.1268 0.874422,16.1276 1.06174,17.1203 1.42741,18.0489 1.79312,18.9776 2.33111,19.8264 3.01434,20.5451 3.69773,21.2639 4.51341,21.8387 5.41703,22.2324 6.32086,22.6262 7.29262,22.83 8.27607,22.83L13.563,22.83 13.563,19.6579 8.27607,19.6579C7.7321,19.6579 7.19139,19.5453 6.68406,19.3243 6.17652,19.1031 5.70999,18.7767 5.31333,18.3594 4.91651,17.942 4.59775,17.4422 4.37894,16.8866 4.1601,16.3308 4.04656,15.7326 4.04656,15.1268 4.04656,14.5209 4.1601,13.9227 4.37894,13.367 4.59775,12.8114 4.91651,12.3115 5.31333,11.8941 5.70999,11.4769 6.17652,11.1505 6.68406,10.9293 7.19139,10.7083 7.7321,10.5957 8.27607,10.5957L15.2859,10.5957 15.2859,16.8493z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="WhiteboardIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                    <GeometryDrawing Brush="#FF222222" Geometry="F1 M24,24z M0,0z M10.6784,2.72682C10.6784,2.24019,11.0728,1.8457,11.5594,1.8457L12.5245,1.8457C13.0111,1.8457,13.4056,2.24019,13.4056,2.72682L13.4056,3.60777 23.4545,3.60777C23.7557,3.60777,24,3.85198,24,4.15323L24,5.78959C24,6.09083,23.7557,6.33505,23.4545,6.33505L21.8182,6.33505 21.8182,16.0171C21.8182,16.9962,21.019,17.7898,20.033,17.7898L13.3216,17.7898 13.3216,19.4261 15.8182,19.4261C16.1194,19.4261,16.3636,19.6703,16.3636,19.9715L16.3636,21.6079C16.3636,21.9092,16.1194,22.1533,15.8182,22.1533L8.1818,22.1533C7.88055,22.1533,7.63634,21.9092,7.63634,21.6079L7.63634,19.9715C7.63634,19.6703,7.88055,19.4261,8.1818,19.4261L10.5944,19.4261 10.5944,17.7898 3.96693,17.7898C2.98103,17.7898,2.1818,16.9962,2.1818,16.0171L2.1818,6.33505 0.545455,6.33505C0.244211,6.33505,0,6.09083,0,5.78959L0,4.15323C0,3.85198,0.244211,3.60777,0.545455,3.60777L10.6784,3.60777 10.6784,2.72682z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="GestureIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V25 H24 V0 H0 Z">
                    <GeometryDrawing Brush="#FF222222" Geometry="F0 M24,25z M0,0z M5.23338,7.02449C5.23338,4.04984 7.67384,1.60938 10.6485,1.60938 13.6231,1.60938 16.0636,4.04984 16.0636,7.02449 16.0636,8.71614 15.2582,10.2172 14.0303,11.2128L13.6839,11.1255C13.5766,11.0989,13.4665,11.0856,13.356,11.0858L13.356,7.02449C13.356,5.54792 12.1251,4.31693 10.6485,4.31693 9.17192,4.31693 7.94093,5.54792 7.94093,7.02449L7.94093,11.6807C6.33328,10.7381,5.23338,9.00996,5.23338,7.02449z M10.1933,5.76784C10.3209,5.72261 10.4546,5.69679 10.5899,5.69122 10.68,5.68674 10.7704,5.69093 10.8596,5.70442 10.9041,5.71191 10.9482,5.72163 10.9918,5.73353 11.0356,5.74458 11.0788,5.75783 11.1213,5.77321 11.1637,5.78962 11.2052,5.80814 11.2456,5.82872 11.2863,5.84789 11.326,5.86907 11.3646,5.8922 11.4795,5.96446 11.5829,6.05361 11.6713,6.15663 11.7004,6.1905 11.7277,6.22578 11.7533,6.26235 11.832,6.37325 11.8935,6.49537 11.9357,6.62459 11.9776,6.75361 11.9999,6.8882 12.0018,7.02385L12.0018,12.439 13.3556,12.439C13.4661,12.4388,13.5762,12.4521,13.6835,12.4786L19.0986,13.8324C19.3917,13.9056 19.6519,14.0747 19.8378,14.3128 20.0237,14.5509 20.1246,14.8444 20.1245,15.1465L20.1245,20.5616C20.1245,21.6898 19.3607,22.6265 18.6993,22.9572 18.038,23.2879 17.417,23.2692 17.417,23.2692L10.6481,23.2692C10.6287,23.2688 10.6093,23.2681 10.5899,23.2669 10.5528,23.2657 10.5157,23.263 10.4788,23.2588 10.4674,23.2571 10.4559,23.2553 10.4445,23.2533 10.4179,23.2488 10.3914,23.2436 10.3651,23.2375 10.3421,23.2328 10.3192,23.2275 10.2964,23.2217 10.2831,23.2183 10.2699,23.2146 10.2567,23.2108 10.2282,23.2021 10.2,23.1924 10.1721,23.1817 10.1552,23.175 10.1385,23.168 10.1219,23.1606 10.0969,23.1499 10.0722,23.1384 10.0478,23.1262 10.0273,23.1162 10.007,23.1056 9.98704,23.0945 9.97099,23.0861 9.95513,23.0773 9.93944,23.0681 9.91789,23.0547 9.89673,23.0406 9.87598,23.0259 9.86261,23.0173 9.84939,23.0085 9.83632,22.9995L9.80724,22.9757 4.42121,18.9382C4.14989,18.7357 3.96425,18.439 3.90089,18.1064 3.83752,17.7739 3.90103,17.4297 4.07889,17.1417 4.25676,16.8536 4.53607,16.6427 4.86177,16.5504 5.18747,16.4581 5.53593,16.4912 5.83845,16.6431L9.29429,18.3723 9.29429,13.7927 9.29429,7.02385C9.2949,6.97253 9.29843,6.9213 9.30486,6.87039 9.3106,6.82593 9.31854,6.78179 9.32866,6.73812 9.36928,6.56187 9.4448,6.39554 9.55076,6.24896 9.63093,6.1391 9.7272,6.04194 9.83633,5.96076 9.87205,5.93338 9.90911,5.90782 9.94738,5.88414 10.0252,5.83722 10.1076,5.79825 10.1933,5.76784z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="MoreIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                    <GeometryDrawing Brush="#222222" Geometry="F1 M24,24z M0,0z M3.336,1.17001C2.13975,1.17001,1.17,2.13976,1.17,3.33601L1.17,8.75101C1.17,9.94726,2.13975,10.917,3.336,10.917L8.751,10.917C9.94725,10.917,10.917,9.94726,10.917,8.75101L10.917,3.33601C10.917,2.13976,9.94725,1.17001,8.751,1.17001L3.336,1.17001z" />
                    <GeometryDrawing Brush="#222222" Geometry="F1 M24,24z M0,0z M15.249,1.17001C14.0527,1.17001,13.083,2.13976,13.083,3.33601L13.083,8.75101C13.083,9.94726,14.0527,10.917,15.249,10.917L20.664,10.917C21.8602,10.917,22.83,9.94726,22.83,8.75101L22.83,3.33601C22.83,2.13976,21.8602,1.17001,20.664,1.17001L15.249,1.17001z" />
                    <GeometryDrawing Brush="#222222" Geometry="F1 M24,24z M0,0z M3.336,13.083C2.13975,13.083,1.17,14.0528,1.17,15.249L1.17,20.664C1.17,21.8603,2.13975,22.83,3.336,22.83L8.751,22.83C9.94725,22.83,10.917,21.8603,10.917,20.664L10.917,15.249C10.917,14.0528,9.94725,13.083,8.751,13.083L3.336,13.083z" />
                    <GeometryDrawing Brush="#222222" Geometry="F1 M24,24z M0,0z M15.249,13.083C14.0527,13.083,13.083,14.0528,13.083,15.249L13.083,20.664C13.083,21.8603,14.0527,22.83,15.249,22.83L20.664,22.83C21.8602,22.83,22.83,21.8603,22.83,20.664L22.83,15.249C22.83,14.0528,21.8602,13.083,20.664,13.083L15.249,13.083z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="FoldIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                    <GeometryDrawing Brush="#222222" Geometry="F0 M24,24z M0,0z M22.8347,21.5006L2.50417,1.17001 1.16525,2.50893 5.45737,6.80104C3.85257,8.10197 2.53265,9.72576 1.64954,11.5964 1.53559,11.8433 1.52609,12.1282 1.63055,12.3751L1.63055,12.3941C1.63055,12.4131 1.64954,12.4321 1.65904,12.4606 1.68752,12.5175 1.72551,12.5935 1.77299,12.698 1.87744,12.8974 2.01988,13.1822 2.21929,13.5146 2.61812,14.1793 3.21635,15.0719 4.04249,15.9645 5.69477,17.7497 8.30612,19.5919 11.981,19.5919 13.7282,19.5919 15.4375,19.1551 16.9568,18.31L21.4768,22.83 22.8158,21.4911 22.8347,21.5006z M11.9905,15.8791C12.5033,15.8696 13.0066,15.7556 13.4719,15.5467 13.6428,15.4707 13.7852,15.3758 13.9372,15.2808L8.72394,10.0676C8.62898,10.2195 8.53402,10.3715 8.45805,10.5329 8.24915,10.9982 8.1257,11.5015 8.1257,12.0143 8.1162,12.527 8.21116,13.0303 8.40108,13.5051 8.591,13.9799 8.87587,14.4072 9.23671,14.768 9.59755,15.1289 10.0249,15.4138 10.4997,15.6037 10.9745,15.7936 11.4777,15.8791 11.9905,15.8791z" />
                    <GeometryDrawing Brush="#222222" Geometry="F1 M24,24z M0,0z M10.9063,6.37657C11.2749,6.33269 11.6452,6.30726 12,6.30726 14.974,6.30726 17.1134,7.78595 18.5447,9.32737 19.2601,10.0978 19.7852,10.8712 20.1309,11.4519 20.2587,11.6665 20.3611,11.8535 20.4389,12.0025 20.0809,12.6966 19.6562,13.3505 19.1703,13.9543L18.5749,14.694 20.0544,15.8848 20.6498,15.145C21.3248,14.3064 21.8966,13.387 22.3556,12.4078 22.4706,12.1625 22.475,11.8789 22.3683,11.6299L22.3669,11.6266 22.364,11.6201 22.3551,11.5998C22.3477,11.5833 22.3375,11.5605 22.3243,11.5319 22.2979,11.4748 22.2598,11.3946 22.2098,11.2945 22.1097,11.0944 21.9615,10.8142 21.7628,10.4805 21.3666,9.81482 20.7641,8.92644 19.9364,8.03508 18.2816,6.25295 15.6731,4.4081 12,4.4081 11.5572,4.4081 11.1108,4.43965 10.6818,4.49072L9.73885,4.60297 9.96336,6.48883 10.9063,6.37657z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
    </Window.Resources>
    <Grid>
        <Grid>
            <Popup Name="PenPaletteV2Popup" PopupAnimation="Fade" IsOpen="False" StaysOpen="True" AllowsTransparency="True" Placement="Relative">
                <popups:ColorPalette Loaded="PenPaletteV2_Loaded" x:Name="PenPaletteV2" Width="300" />
            </Popup>
        </Grid>
        <Grid>
            <Popup Name="SelectionPopupV2" PopupAnimation="Fade" IsOpen="False" StaysOpen="True" AllowsTransparency="True" Placement="Relative">
                <popups:SelectionPopup Loaded="SelectionV2_Loaded" x:Name="SelectionV2" Width="300" />
            </Popup>
        </Grid>
        <Grid>
            <Popup Name="ShapeDrawingPopupV2" PopupAnimation="Fade" IsOpen="False" StaysOpen="True" AllowsTransparency="True" Placement="Relative">
                <popups:ShapeDrawingPopup Loaded="ShapeDrawingV2_Loaded" x:Name="ShapeDrawingV2" Width="570" />
            </Popup>
        </Grid>

        <!--这一部分是用于展示工具栏的对齐和贴边提示的Popup-->
        <Grid Name="PlacementFeedbackPopups">
            <Popup Name="PlacementFeedbackPopup" Placement="Absolute" StaysOpen="True" AllowsTransparency="True" IsOpen="False">
                <Border Background="#883b82f6" IsHitTestVisible="False" Name="PlaceFeedbackBorder">
                    <TextBlock Name="PlacementFeedbackTipText" FontSize="16" FontWeight="Bold" Foreground="#dbeafe" Margin="6"/>
                </Border>
            </Popup>
        </Grid>

        <Grid Name="ToolbarV2" RenderTransformOrigin=".5,.5">
            <Grid Name="ToolBarV2Grid" HorizontalAlignment="Left" Margin="24" Height="48">
                <DockPanel Name="FallbackBackgroundLayer">
                    <DockPanel.Effect>
                        <DropShadowEffect Opacity="0.01" Direction="0" ShadowDepth="0.1" BlurRadius="0.01"></DropShadowEffect>
                    </DockPanel.Effect>
                    <Image DockPanel.Dock="Left" Height="48" HorizontalAlignment="Left">
                        <Image.Source>
                            <DrawingImage>
                                <DrawingImage.Drawing>
                                    <DrawingGroup ClipGeometry="M0,0 V120 H63 V0 H0 Z">
                                        <GeometryDrawing Brush="#fafafa" Geometry="F1 M63,120z M0,0z M62.6465,-0.00390625L60.3128,-0.00390625C34.3338,-0.00390625 21.3443,-0.00390625 12.5491,7.09435 10.7817,8.52078 9.17117,10.1313 7.74474,11.8988 0.646484,20.6939 0.646484,33.6834 0.646484,59.6624 0.646484,85.6414 0.646484,98.6309 7.74474,107.426 9.17117,109.194 10.7817,110.804 12.5491,112.23 21.3443,119.329 34.3338,119.329 60.3128,119.329L62.6465,119.329 62.6465,-0.00390625z"/>
                                    </DrawingGroup>
                                </DrawingImage.Drawing>
                            </DrawingImage>
                        </Image.Source>
                    </Image>
                    <Image DockPanel.Dock="Right" Height="48" HorizontalAlignment="Left">
                        <Image.Source>
                            <DrawingImage>
                                <DrawingImage.Drawing>
                                    <DrawingGroup ClipGeometry="M0,0 V120 H63 V0 H0 Z">
                                        <GeometryDrawing Brush="#fafafa" Geometry="F1 M63,120z M0,0z M0.447266,119.495L2.78091,119.495C28.7599,119.495 41.7495,119.495 50.5446,112.396 52.312,110.97 53.9226,109.36 55.349,107.592 62.4473,98.797 62.4473,85.8074 62.4473,59.8284 62.4473,33.8494 62.4473,20.8599 55.349,12.0648 53.9226,10.2973 52.312,8.6868 50.5446,7.26037 41.7495,0.162109 28.7599,0.162109 2.78091,0.162109L0.447266,0.162109 0.447266,119.495z" />
                                    </DrawingGroup>
                                </DrawingImage.Drawing>
                            </DrawingImage>
                        </Image.Source>
                    </Image>
                    <Border Background="#fafafa" Height="48" Margin="-1,0,-1,0.25" VerticalAlignment="Center"></Border>
                </DockPanel>
                <Image Name="MainBackgroundLayer">
                    <Image.Source>
                        <DrawingImage>
                            <DrawingImage.Drawing>
                                <DrawingGroup x:Name="BackgroundBorderDrawingGroup">
                                    <GeometryDrawing Brush="#fafafa" x:Name="ToolBarBackgroundBorder">
                                        <GeometryDrawing.Pen>
                                            <Pen Brush="#d4d4d8" Thickness="3"/>
                                        </GeometryDrawing.Pen>
                                    </GeometryDrawing>
                                </DrawingGroup>
                            </DrawingImage.Drawing>
                        </DrawingImage>
                    </Image.Source>
                </Image>
                <StackPanel Orientation="Horizontal" Margin="4,0">
                    <Grid Name="HeadIcon" RenderTransformOrigin=".5,.5" MouseMove="HeadIconButton_MouseMove" MouseDown="HeadIconButton_MouseDown" MouseUp="HeadIconButton_MouseUp" Width="42" Height="42" Margin="0,0,2,0">
                        <Image Name="HeadIconImage" Height="42" Width="42" Source="../Resources/Icons-png/icc-toolbar-v2.png" RenderOptions.BitmapScalingMode="HighQuality"></Image>
                    </Grid>
                    <ItemsControl Name="ToolBarItemsControl">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel Orientation="Horizontal"></StackPanel>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate DataType="{x:Type local:FloatingBarItem}">
                                <StackPanel Orientation="Horizontal">
                                    <Grid RenderTransformOrigin=".5,.5" MouseDown="ToolbarButton_MouseDown" MouseUp="ToolbarButton_MouseUp" MouseLeave="ToolbarButton_MouseLeave" Tag="{Binding}"  Visibility="{Binding _itemVisibility}" Margin="2,0,0,0" Width="42" Height="42">
                                        <Image Height="42" Width="42">
                                            <Image.Source>
                                                <DrawingImage>
                                                    <DrawingImage.Drawing>
                                                        <DrawingGroup ClipGeometry="M0,0 V120 H120 V0 H0 Z">
                                                            <GeometryDrawing Brush="{Binding _backgroundBrush}" Geometry="F1 M120,120z M0,0z M0.443359,59.9384C0.443359,33.9607 0.443359,20.9718 7.54095,12.1769 8.96777,10.4089 10.5788,8.79785 12.3468,7.37103 21.1418,0.273438 34.1306,0.273438 60.1084,0.273438 86.0861,0.273438 99.075,0.273438 107.87,7.37103 109.638,8.79785 111.249,10.4089 112.676,12.1769 119.773,20.9718 119.773,33.9607 119.773,59.9384 119.773,85.9162 119.773,98.905 112.676,107.7 111.249,109.468 109.638,111.079 107.87,112.506 99.075,119.603 86.0861,119.603 60.1084,119.603 34.1306,119.603 21.1418,119.603 12.3468,112.506 10.5788,111.079 8.96777,109.468 7.54095,107.7 0.443359,98.905 0.443359,85.9162 0.443359,59.9384z" />
                                                        </DrawingGroup>
                                                    </DrawingImage.Drawing>
                                                </DrawingImage>
                                            </Image.Source>
                                        </Image>
                                        <Image Height="42" Width="42" Opacity="0">
                                            <Image.Source>
                                                <DrawingImage>
                                                    <DrawingImage.Drawing>
                                                        <DrawingGroup ClipGeometry="M0,0 V120 H120 V0 H0 Z">
                                                            <GeometryDrawing Brush="{Binding _pressFeedbackColorBrush}" Geometry="F1 M120,120z M0,0z M0.443359,59.9384C0.443359,33.9607 0.443359,20.9718 7.54095,12.1769 8.96777,10.4089 10.5788,8.79785 12.3468,7.37103 21.1418,0.273438 34.1306,0.273438 60.1084,0.273438 86.0861,0.273438 99.075,0.273438 107.87,7.37103 109.638,8.79785 111.249,10.4089 112.676,12.1769 119.773,20.9718 119.773,33.9607 119.773,59.9384 119.773,85.9162 119.773,98.905 112.676,107.7 111.249,109.468 109.638,111.079 107.87,112.506 99.075,119.603 86.0861,119.603 60.1084,119.603 34.1306,119.603 21.1418,119.603 12.3468,112.506 10.5788,111.079 8.96777,109.468 7.54095,107.7 0.443359,98.905 0.443359,85.9162 0.443359,59.9384z" />
                                                        </DrawingGroup>
                                                    </DrawingImage.Drawing>
                                                </DrawingImage>
                                            </Image.Source>
                                        </Image>
                                        <Image Height="{Binding IconHeight}" Source="{Binding IconSource}"/>
                                    </Grid>
                                    <Border Opacity="{Binding _separatorOpacity}" Visibility="{Binding _separatorVisibility}" Width="1" Height="28" CornerRadius="0.5" Background="#e1e1e1" Margin="3,0,1,0"></Border>
                                </StackPanel>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </Grid>
        </Grid>
    </Grid>
    
</Window>
